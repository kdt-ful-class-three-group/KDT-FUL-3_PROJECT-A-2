<!DOCTYPE html>
<html>
  <head>
    <title>ìº”ë“¤ì°¨íŠ¸ ê¸°ë³¸ ì˜ˆì œ</title>
    <!-- Chart.js, Financial ì°¨íŠ¸ í”ŒëŸ¬ê·¸ì¸, ë‚ ì§œ í¬ë§·ìš© ì–´ëŒ‘í„° ë¶ˆëŸ¬ì˜¤ê¸° -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
  </head>
  <body>
    <h1>ì£¼ì‹í˜• ìº”ë“¤ì°¨íŠ¸ (ë‚ ì§œ, ë¶™ì€ ë§‰ëŒ€ í¬í•¨)</h1>
    <!-- ì°¨íŠ¸ë¥¼ ê·¸ë¦´ ìº”ë²„ìŠ¤ ìš”ì†Œ -->
    <canvas id="myChart" width="1000" height="400"></canvas>

    <script>
      // ğŸŸ¢ 1. ìº”ë“¤ì°¨íŠ¸ì— ë“¤ì–´ê°ˆ ë”ë¯¸ ë°ì´í„° ìƒì„±
      // - ë‚ ì§œ(xì¶•)ì™€ ì‹œê°€(o), ê³ ê°€(h), ì €ê°€(l), ì¢…ê°€(c)ë¥¼ í¬í•¨
      const candleData = [
        { x: new Date("2025-05-20"), o: 1000, h: 1020, l: 980, c: 1005 },
        { x: new Date("2025-05-21"), o: 1010, h: 1030, l: 990, c: 1020 },
        { x: new Date("2025-05-22"), o: 1020, h: 1040, l: 1000, c: 1010 },
        { x: new Date("2025-05-23"), o: 1010, h: 1035, l: 995, c: 1000 },
        { x: new Date("2025-05-24"), o: 1000, h: 1025, l: 980, c: 1010 },
        { x: new Date("2025-05-25"), o: 1005, h: 1020, l: 990, c: 1008 },
        { x: new Date("2025-05-26"), o: 1010, h: 1030, l: 1000, c: 1015 },
      ];

      // ğŸŸ¢ 2. canvas ìš”ì†Œë¥¼ ê°€ì ¸ì™€ì„œ ê·¸ë¦¬ê¸° ìœ„í•œ ì»¨í…ìŠ¤íŠ¸(ctx) ì¤€ë¹„
      const ctx = document.getElementById("myChart").getContext("2d");

      // ğŸŸ¢ 3. Chart.js ê°ì²´ ìƒì„± - ìº”ë“¤ì°¨íŠ¸ íƒ€ì…ìœ¼ë¡œ ì´ˆê¸°í™”
      const chart = new Chart(ctx, {
        type: "candlestick", // ì°¨íŠ¸ ì¢…ë¥˜ ì„¤ì • (ìº”ë“¤ì°¨íŠ¸ë¡œ ì§€ì •)
        data: {
          datasets: [
            {
              label: "ì£¼ì‹ ë°ì´í„°", // ë²”ë¡€(legend) ì´ë¦„
              data: candleData, // ìœ„ì—ì„œ ë§Œë“  OHLC ë°ì´í„° ì‚½ì…

              // âœ… ë§‰ëŒ€ ê°„ê²© ì¡°ì ˆ ì˜µì…˜ - ë¶™ì–´ ë³´ì´ë„ë¡
              barThickness: 15, // ë§‰ëŒ€ì˜ ë‘ê»˜ë¥¼ ì§ì ‘ ì§€ì • (px)
              categoryPercentage: 1.0, // xì¶• ì „ì²´ ê³µê°„ì„ 100% ì°¨ì§€
              barPercentage: 1.0, // í•œ êµ¬ê°„ ì•ˆì—ì„œ ë§‰ëŒ€ê°€ ê½‰ ì°¨ê²Œ
            },
          ],
        },
        options: {
          responsive: true, // ë°˜ì‘í˜• ì„¤ì • (ì°½ í¬ê¸°ì— ë”°ë¼ ìë™ ë¦¬ì‚¬ì´ì§•)

          // ğŸŸ¢ 4. xì¶•, yì¶• ë“± ìŠ¤ì¼€ì¼ ê´€ë ¨ ì„¤ì •
          scales: {
            x: {
              type: "time", // xì¶•ì„ ì‹œê°„ ê¸°ë°˜ìœ¼ë¡œ ì„¤ì •
              time: {
                unit: "day", // í•˜ë£¨ ë‹¨ìœ„ë¡œ ëˆˆê¸ˆ ì„¤ì •
                tooltipFormat: "yyyy-MM-dd", // íˆ´íŒì— í‘œì‹œí•  ë‚ ì§œ í˜•ì‹
                displayFormats: {
                  day: "MM-dd", // ëˆˆê¸ˆ í‘œì‹œ í˜•ì‹: 05-20 ì´ëŸ° ì‹
                },
              },
              ticks: {
                autoSkip: false, // ëˆˆê¸ˆ ìƒëµí•˜ì§€ ì•Šë„ë¡ ì„¤ì •
                maxRotation: 0, // ëˆˆê¸ˆ í…ìŠ¤íŠ¸ íšŒì „ ì—†ìŒ
                minRotation: 0,
                font: {
                  size: 10, // ëˆˆê¸ˆ í…ìŠ¤íŠ¸ í¬ê¸°
                },
                // âœ… ëˆˆê¸ˆ í…ìŠ¤íŠ¸ë¥¼ MM-DD í˜•íƒœë¡œ í‘œì‹œí•˜ê¸° ìœ„í•œ ì½œë°±
                callback: function (value) {
                  const date = new Date(value);
                  return `${date.getMonth() + 1}-${date.getDate()}`;
                },
              },
              title: {
                display: true,
                text: "ë‚ ì§œ", // xì¶• ì œëª©
              },
            },
            y: {
              beginAtZero: false, // 0ë¶€í„° ì‹œì‘í•˜ì§€ ì•ŠìŒ (ì£¼ì‹ ê°€ê²©ì€ ëŒ€ë¶€ë¶„ 0ë³´ë‹¤ í¼)
              title: {
                display: true,
                text: "ê°€ê²©", // yì¶• ì œëª©
              },
            },
          },

          // ğŸŸ¢ 5. í”ŒëŸ¬ê·¸ì¸ ì˜µì…˜ (íˆ´íŒ, ë²”ë¡€ ë“±)
          plugins: {
            tooltip: {
              callbacks: {
                // íˆ´íŒì— í‘œì‹œë˜ëŠ” í…ìŠ¤íŠ¸ ì§ì ‘ ì •ì˜
                label: function (context) {
                  const { o, h, l, c } = context.raw;
                  return `O: ${o}, H: ${h}, L: ${l}, C: ${c}`;
                },
              },
            },
            legend: {
              display: false, // ì°¨íŠ¸ ìœ„ì— ìˆëŠ” ë²”ë¡€ ìˆ¨ê¸°ê¸°
            },
          },
        },
      });
    </script>
  </body>
</html>
